function e4fn(a){var b,c;return b=1+a,c=1-a,Math.sqrt(Math.pow(b,b)*Math.pow(c,c))}var Proj4js={defaultDatum:"WGS84",transform:function(a,b,c){if(!a.readyToUse)return this.reportError("Proj4js initialization for:"+a.srsCode+" not yet complete"),c;if(!b.readyToUse)return this.reportError("Proj4js initialization for:"+b.srsCode+" not yet complete"),c;if(a.datum&&b.datum&&((a.datum.datum_type==Proj4js.common.PJD_3PARAM||a.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=b.datumCode||(b.datum.datum_type==Proj4js.common.PJD_3PARAM||b.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=a.datumCode)){var d=Proj4js.WGS84;this.transform(a,d,c),a=d}return"enu"!=a.axis&&this.adjust_axis(a,!1,c),"longlat"==a.projName?(c.x*=Proj4js.common.D2R,c.y*=Proj4js.common.D2R):(a.to_meter&&(c.x*=a.to_meter,c.y*=a.to_meter),a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=this.datum_transform(a.datum,b.datum,c),b.from_greenwich&&(c.x-=b.from_greenwich),"longlat"==b.projName?(c.x*=Proj4js.common.R2D,c.y*=Proj4js.common.R2D):(b.forward(c),b.to_meter&&(c.x/=b.to_meter,c.y/=b.to_meter)),"enu"!=b.axis&&this.adjust_axis(b,!0,c),c},datum_transform:function(a,b,c){if(a.compare_datums(b))return c;if(a.datum_type==Proj4js.common.PJD_NODATUM||b.datum_type==Proj4js.common.PJD_NODATUM)return c;var d=a.a,e=a.es,f=b.a,g=b.es,h=a.datum_type;if(h==Proj4js.common.PJD_GRIDSHIFT)if(0==this.apply_gridshift(a,0,c))a.a=Proj4js.common.SRS_WGS84_SEMIMAJOR,a.es=Proj4js.common.SRS_WGS84_ESQUARED;else{if(!a.datum_params)return a.a=d,a.es=a.es,c;for(var i=1,j=0,k=a.datum_params.length;k>j;j++)i*=a.datum_params[j];if(0==i)return a.a=d,a.es=a.es,c;h=a.datum_params.length>3?Proj4js.common.PJD_7PARAM:Proj4js.common.PJD_3PARAM}return b.datum_type==Proj4js.common.PJD_GRIDSHIFT&&(b.a=Proj4js.common.SRS_WGS84_SEMIMAJOR,b.es=Proj4js.common.SRS_WGS84_ESQUARED),(a.es!=b.es||a.a!=b.a||h==Proj4js.common.PJD_3PARAM||h==Proj4js.common.PJD_7PARAM||b.datum_type==Proj4js.common.PJD_3PARAM||b.datum_type==Proj4js.common.PJD_7PARAM)&&(a.geodetic_to_geocentric(c),(a.datum_type==Proj4js.common.PJD_3PARAM||a.datum_type==Proj4js.common.PJD_7PARAM)&&a.geocentric_to_wgs84(c),(b.datum_type==Proj4js.common.PJD_3PARAM||b.datum_type==Proj4js.common.PJD_7PARAM)&&b.geocentric_from_wgs84(c),b.geocentric_to_geodetic(c)),b.datum_type==Proj4js.common.PJD_GRIDSHIFT&&this.apply_gridshift(b,1,c),a.a=d,a.es=e,b.a=f,b.es=g,c},apply_gridshift:function(a,b,c){if(null==a.grids||0==a.grids.length)return-38;for(var d={x:c.x,y:c.y},e={x:Number.NaN,y:Number.NaN},f=!1,g=0,h=a.grids.length;h>g;g++){var i=a.grids[g];f=i.mandatory;var j=i.grid;if(null!=j){var k=(Math.abs(j.del[1])+Math.abs(j.del[0]))/1e4;if(!(j.ll[1]-k>d.y||j.ll[0]-k>d.x||j.ll[1]+(j.lim[1]-1)*j.del[1]+k<d.y||j.ll[0]+(j.lim[0]-1)*j.del[0]+k<d.x||("null"==i.name?(e.x=d.x,e.y=d.y):e=Proj4js.common.nad_cvt(d,b,j),isNaN(e.x))))break}else if(i.mandatory)return this.reportError("unable to find '"+i.name+"' grid."),-48}return isNaN(e.x)?f?-1:(this.reportError("failed to find a grid shift table for location '"+d.x*Proj4js.common.R2D+" "+d.y*Proj4js.common.R2D+" tried: '"+a.nadgrids+"'"),-48):(c.x=e.x,c.y=e.y,0)},adjust_axis:function(a,b,c){for(var d,e,f=c.x,g=c.y,h=c.z||0,i=0;3>i;i++)if(!b||2!=i||void 0!==c.z)switch(0==i?(d=f,e="x"):1==i?(d=g,e="y"):(d=h,e="z"),a.axis[i]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return alert("ERROR: unknow axis ("+a.axis[i]+") - check definition of "+a.projName),null}return c},reportError:function(){},extend:function(a,b){if(a=a||{},b)for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}return a},Class:function(){for(var a,b=function(){this.initialize.apply(this,arguments)},c={},d=0;d<arguments.length;++d)a="function"==typeof arguments[d]?arguments[d].prototype:arguments[d],Proj4js.extend(c,a);return b.prototype=c,b},bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}}};Proj4js.Proj=Proj4js.Class({readyToUse:!0,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(a,b){if(this.srsCodeInput=a,this.queue=[],b&&this.queue.push(b),a.indexOf("GEOGCS")>=0||a.indexOf("GEOCCS")>=0||a.indexOf("PROJCS")>=0||a.indexOf("LOCAL_CS")>=0)return this.parseWKT(a),this.deriveConstants(),this.loadProjCode(this.projName),void 0;if(0==a.indexOf("urn:")){var c=a.split(":");"ogc"!=c[1]&&"x-ogc"!=c[1]||"def"!=c[2]||"crs"!=c[3]||(a=c[4]+":"+c[c.length-1])}else if(0==a.indexOf("http://")){var d=a.split("#");d[0].match(/epsg.org/)?a="EPSG:"+d[1]:d[0].match(/RIG.xml/)?a="IGNF:"+d[1]:-1!=d[0].indexOf("/def/crs/")&&(d=a.split("/"),a=d.pop(),d.pop(),a=d.pop()+":"+a)}this.srsCode=a.toUpperCase(),0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode),this.parseDefs(),this.initTransforms()},initTransforms:function(){if(Proj4js.extend(this,Proj4js.Proj[this.projName]),this.init(),this.readyToUse=!0,this.queue)for(var a;a=this.queue.shift();)a.call(this,this)},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(a){var b=a.match(this.wktRE);if(b){var c,d=b[1],e=b[2],f=e.split(",");c="TOWGS84"==d.toUpperCase()?d:f.shift(),c=c.replace(/^\"/,""),c=c.replace(/\"$/,"");for(var g=new Array,h=0,i="",j=0;j<f.length;++j){for(var k=f[j],l=0;l<k.length;++l)"["==k.charAt(l)&&++h,"]"==k.charAt(l)&&--h;i+=k,0===h?(g.push(i),i=""):i+=","}switch(d){case"LOCAL_CS":this.projName="identity",this.localCS=!0,this.srsCode=c;break;case"GEOGCS":this.projName="longlat",this.geocsCode=c,this.srsCode||(this.srsCode=c);break;case"PROJCS":this.srsCode=c;break;case"GEOCCS":break;case"PROJECTION":this.projName=Proj4js.wktProjections[c];break;case"DATUM":this.datumName=c;break;case"LOCAL_DATUM":this.datumCode="none";break;case"SPHEROID":this.ellps=c,this.a=parseFloat(g.shift()),this.rf=parseFloat(g.shift());break;case"PRIMEM":this.from_greenwich=parseFloat(g.shift());break;case"UNIT":this.units=c,this.unitsPerMeter=parseFloat(g.shift());break;case"PARAMETER":var m=c.toLowerCase(),n=parseFloat(g.shift());switch(m){case"false_easting":this.x0=n;break;case"false_northing":this.y0=n;break;case"scale_factor":this.k0=n;break;case"central_meridian":this.long0=n*Proj4js.common.D2R;break;case"latitude_of_origin":this.lat0=n*Proj4js.common.D2R;break;case"more_here":}break;case"TOWGS84":this.datum_params=g;break;case"AXIS":var m=c.toLowerCase(),n=g.shift();switch(n){case"EAST":n="e";break;case"WEST":n="w";break;case"NORTH":n="n";break;case"SOUTH":n="s";break;case"UP":n="u";break;case"DOWN":n="d";break;case"OTHER":default:n=" "}switch(this.axis||(this.axis="enu"),m){case"x":this.axis=n+this.axis.substr(1,2);break;case"y":this.axis=this.axis.substr(0,1)+n+this.axis.substr(2,1);break;case"z":this.axis=this.axis.substr(0,2)+n}case"MORE_HERE":}for(var j=0;j<g.length;++j)this.parseWKT(g[j])}},parseDefs:function(){var a=new RegExp("(title|proj|units|datum|nadgrids|ellps|a|b|rf|lat_0|lat_1|lat_2|lat_ts|lon_0|lon_1|lon_2|alpha|lonc|x_0|y_0|k_0|k|r_a|zone|south|towgs84|to_meter|from_greenwich|pm|axis|czech|wktext|no_rot|no_off|no_defs)");this.defData=Proj4js.defs[this.srsCode];var b,c;if(this.defData){for(var d=this.defData.split("+"),e=0;e<d.length;e++){var f=d[e].split("=");switch(b=f[0].toLowerCase(),c=f[1],b.replace(/\s/gi,"")){case"":break;case"title":for(this.title=c;!d[e+1].match(a);)this.title+="+"+d[++e];break;case"proj":this.projName=c.replace(/\s/gi,"");break;case"units":this.units=c.replace(/\s/gi,"");break;case"datum":this.datumCode=c.replace(/\s/gi,"");break;case"nadgrids":this.nadgrids=c.replace(/\s/gi,"");break;case"ellps":this.ellps=c.replace(/\s/gi,"");break;case"a":this.a=parseFloat(c);break;case"b":this.b=parseFloat(c);break;case"rf":this.rf=parseFloat(c);break;case"lat_0":this.lat0=c*Proj4js.common.D2R;break;case"lat_1":this.lat1=c*Proj4js.common.D2R;break;case"lat_2":this.lat2=c*Proj4js.common.D2R;break;case"lat_ts":this.lat_ts=c*Proj4js.common.D2R;break;case"lon_0":this.long0=c*Proj4js.common.D2R;break;case"lon_1":this.long1=c*Proj4js.common.D2R;break;case"lon_2":this.long2=c*Proj4js.common.D2R;break;case"no_rot":this.no_rot=!0;break;case"no_off":this.no_off=!0;break;case"alpha":this.alpha=parseFloat(c)*Proj4js.common.D2R;break;case"lonc":this.longc=c*Proj4js.common.D2R;break;case"x_0":this.x0=parseFloat(c);break;case"y_0":this.y0=parseFloat(c);break;case"k_0":this.k0=parseFloat(c);break;case"k":this.k0=parseFloat(c);break;case"r_a":this.R_A=!0;break;case"zone":this.zone=parseInt(c,10);break;case"south":this.utmSouth=!0;break;case"towgs84":this.datum_params=c.split(",");break;case"to_meter":this.to_meter=parseFloat(c);break;case"from_greenwich":this.from_greenwich=c*Proj4js.common.D2R;break;case"czech":this.czech=!0;break;case"pm":c=c.replace(/\s/gi,""),this.from_greenwich=Proj4js.PrimeMeridian[c]?Proj4js.PrimeMeridian[c]:parseFloat(c),this.from_greenwich*=Proj4js.common.D2R;break;case"axis":c=c.replace(/\s/gi,"");var g="ewnsud";3==c.length&&-1!=g.indexOf(c.substr(0,1))&&-1!=g.indexOf(c.substr(1,1))&&-1!=g.indexOf(c.substr(2,1))&&(this.axis=c);break;case"wktext":break;case"no_defs":}}this.deriveConstants()}},deriveConstants:function(){if(this.nadgrids&&0==this.nadgrids.length&&(this.nadgrids=null),this.nadgrids){this.grids=this.nadgrids.split(",");var a=null,b=this.grids.length;if(b>0)for(var c=0;b>c;c++){a=this.grids[c];var d=a.split("@");""!=d[d.length-1]?(this.grids[c]={mandatory:1==d.length,name:d[d.length-1],grid:Proj4js.grids[d[d.length-1]]},this.grids[c].mandatory&&!this.grids[c].grid&&Proj4js.reportError("Missing '"+this.grids[c].name+"'")):Proj4js.reportError("nadgrids syntax error '"+this.nadgrids+"' : empty grid found")}}if(this.datumCode&&"none"!=this.datumCode){var e=Proj4js.Datum[this.datumCode];e&&(this.datum_params=e.towgs84?e.towgs84.split(","):null,this.ellps=e.ellipse,this.datumName=e.datumName?e.datumName:this.datumCode)}if(!this.a){var f=Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84;Proj4js.extend(this,f)}this.rf&&!this.b&&(this.b=(1-1/this.rf)*this.a),(0===this.rf||Math.abs(this.a-this.b)<Proj4js.common.EPSLN)&&(this.sphere=!0,this.b=this.a),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=(this.a2-this.b2)/this.a2,this.e=Math.sqrt(this.es),this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0),this.ep2=(this.a2-this.b2)/this.b2,this.k0||(this.k0=1),this.axis||(this.axis="enu"),this.datum=new Proj4js.datum(this)}}),Proj4js.Proj.longlat={init:function(){},forward:function(a){return a},inverse:function(a){return a}},Proj4js.Proj.identity=Proj4js.Proj.longlat,Proj4js.defs={WGS84:"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3857":"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"},Proj4js.defs["EPSG:3785"]=Proj4js.defs["EPSG:3857"],Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3857"],Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3857"],Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3857"],Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:484813681109536e-20,EPSLN:1e-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SRS_WGS84_ESQUARED:.006694379990141316,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},tsfnz:function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(this.HALF_PI-b))/d},phi2z:function(a,b){for(var c,d,e=.5*a,f=this.HALF_PI-2*Math.atan(b),g=0;15>=g;g++)if(c=a*Math.sin(f),d=this.HALF_PI-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return alert("phi2z has NoConvergence"),-9999},qsfnz:function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},iqsfnz:function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return 0>b?-1*Proj4js.common.HALF_PI:Proj4js.common.HALF_PI;for(var d,e,f,g,h=Math.asin(.5*b),i=0;30>i;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return alert("IQSFN-CONV:Latitude failed to converge after 30 iterations"),0/0},asinz:function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},e0fn:function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},e1fn:function(a){return.375*a*(1+.25*a*(1+.46875*a))},e2fn:function(a){return.05859375*a*a*(1+.75*a)},e3fn:function(a){return a*a*a*(35/3072)},mlfn:function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},imlfn:function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return Proj4js.reportError("IMLFN-CONV:Latitude failed to converge after 15 iterations"),0/0},srat:function(a,b){return Math.pow((1-a)/(1+a),b)},sign:function(a){return 0>a?-1:1},adjust_lon:function(a){return a=Math.abs(a)<this.PI?a:a-this.sign(a)*this.TWO_PI},adjust_lat:function(a){return a=Math.abs(a)<this.HALF_PI?a:a-this.sign(a)*this.PI},latiso:function(a,b,c){if(Math.abs(b)>this.HALF_PI)return+Number.NaN;if(b==this.HALF_PI)return Number.POSITIVE_INFINITY;if(b==-1*this.HALF_PI)return-1*Number.POSITIVE_INFINITY;var d=a*c;return Math.log(Math.tan((this.HALF_PI+b)/2))+a*Math.log((1-d)/(1+d))/2},fL:function(a,b){return 2*Math.atan(a*Math.exp(b))-this.HALF_PI},invlatiso:function(a,b){var c=this.fL(1,b),d=0,e=0;do d=c,e=a*Math.sin(d),c=this.fL(Math.exp(a*Math.log((1+e)/(1-e))/2),b);while(Math.abs(c-d)>1e-12);return c},sinh:function(a){var b=Math.exp(a);return b=(b-1/b)/2},cosh:function(a){var b=Math.exp(a);return b=(b+1/b)/2},tanh:function(a){var b=Math.exp(a);return b=(b-1/b)/(b+1/b)},asinh:function(a){var b=a>=0?1:-1;return b*Math.log(Math.abs(a)+Math.sqrt(a*a+1))},acosh:function(a){return 2*Math.log(Math.sqrt((a+1)/2)+Math.sqrt((a-1)/2))},atanh:function(a){return Math.log((a-1)/(a+1))/2},gN:function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},pj_enfn:function(a){var b=new Array;b[0]=this.C00-a*(this.C02+a*(this.C04+a*(this.C06+a*this.C08))),b[1]=a*(this.C22-a*(this.C04+a*(this.C06+a*this.C08)));var c=a*a;return b[2]=c*(this.C44-a*(this.C46+a*this.C48)),c*=a,b[3]=c*(this.C66-a*this.C68),b[4]=c*a*this.C88,b},pj_mlfn:function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},pj_inv_mlfn:function(a,b,c){for(var d=1/(1-b),e=a,f=Proj4js.common.MAX_ITER;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(this.pj_mlfn(e,g,Math.cos(e),c)-a)*h*Math.sqrt(h)*d,e-=h,Math.abs(h)<Proj4js.common.EPSLN)return e}return Proj4js.reportError("cass:pj_inv_mlfn: Convergence error"),e},nad_intr:function(a,b){var c,d={x:(a.x-1e-7)/b.del[0],y:(a.y-1e-7)/b.del[1]},e={x:Math.floor(d.x),y:Math.floor(d.y)},f={x:d.x-1*e.x,y:d.y-1*e.y},g={x:Number.NaN,y:Number.NaN};if(e.x<0){if(!(-1==e.x&&f.x>.99999999999))return g;++e.x,f.x=0}else if(c=e.x+1,c>=b.lim[0]){if(!(c==b.lim[0]&&f.x<1e-11))return g;--e.x,f.x=1}if(e.y<0){if(!(-1==e.y&&f.y>.99999999999))return g;++e.y,f.y=0}else if(c=e.y+1,c>=b.lim[1]){if(!(c==b.lim[1]&&f.y<1e-11))return g;--e.y,f.y=1}c=e.y*b.lim[0]+e.x;var h={x:b.cvs[c][0],y:b.cvs[c][1]};c++;var i={x:b.cvs[c][0],y:b.cvs[c][1]};c+=b.lim[0];var j={x:b.cvs[c][0],y:b.cvs[c][1]};c--;var k={x:b.cvs[c][0],y:b.cvs[c][1]},l=f.x*f.y,m=f.x*(1-f.y),n=(1-f.x)*(1-f.y),o=(1-f.x)*f.y;return g.x=n*h.x+m*i.x+o*k.x+l*j.x,g.y=n*h.y+m*i.y+o*k.y+l*j.y,g},nad_cvt:function(a,b,c){var d={x:Number.NaN,y:Number.NaN};if(isNaN(a.x))return d;var e={x:a.x,y:a.y};e.x-=c.ll[0],e.y-=c.ll[1],e.x=Proj4js.common.adjust_lon(e.x-Proj4js.common.PI)+Proj4js.common.PI;var f=Proj4js.common.nad_intr(e,c);if(b){if(isNaN(f.x))return d;f.x=e.x+f.x,f.y=e.y-f.y;var g,h,i=9,j=1e-12;do{if(h=Proj4js.common.nad_intr(f,c),isNaN(h.x)){this.reportError("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:f.x-h.x-e.x,y:f.y+h.y-e.y},f.x-=g.x,f.y-=g.y}while(i--&&Math.abs(g.x)>j&&Math.abs(g.y)>j);if(0>i)return this.reportError("Inverse grid shift iterator failed to converge."),d;d.x=Proj4js.common.adjust_lon(f.x+c.ll[0]),d.y=f.y+c.ll[1]}else isNaN(f.x)||(d.x=a.x-f.x,d.y=a.y+f.y);return d},C00:1,C02:.25,C04:.046875,C06:.01953125,C08:.01068115234375,C22:.75,C44:.46875,C46:.013020833333333334,C48:.007120768229166667,C66:.3645833333333333,C68:.005696614583333333,C88:.3076171875},Proj4js.datum=Proj4js.Class({initialize:function(a){if(this.datum_type=Proj4js.common.PJD_WGS84,a){if(a.datumCode&&"none"==a.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM),a.datum_params){for(var b=0;b<a.datum_params.length;b++)a.datum_params[b]=parseFloat(a.datum_params[b]);(0!=a.datum_params[0]||0!=a.datum_params[1]||0!=a.datum_params[2])&&(this.datum_type=Proj4js.common.PJD_3PARAM),a.datum_params.length>3&&(0!=a.datum_params[3]||0!=a.datum_params[4]||0!=a.datum_params[5]||0!=a.datum_params[6])&&(this.datum_type=Proj4js.common.PJD_7PARAM,a.datum_params[3]*=Proj4js.common.SEC_TO_RAD,a.datum_params[4]*=Proj4js.common.SEC_TO_RAD,a.datum_params[5]*=Proj4js.common.SEC_TO_RAD,a.datum_params[6]=a.datum_params[6]/1e6+1)}this.datum_type=a.grids?Proj4js.common.PJD_GRIDSHIFT:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params,this.datum_type==Proj4js.common.PJD_GRIDSHIFT&&(this.grids=a.grids)}},compare_datums:function(a){return this.datum_type!=a.datum_type?!1:this.a!=a.a||Math.abs(this.es-a.es)>5e-11?!1:this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]&&this.datum_params[3]==a.datum_params[3]&&this.datum_params[4]==a.datum_params[4]&&this.datum_params[5]==a.datum_params[5]&&this.datum_params[6]==a.datum_params[6]:this.datum_type==Proj4js.common.PJD_GRIDSHIFT||a.datum_type==Proj4js.common.PJD_GRIDSHIFT?this.nadgrids==a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=a.z?a.z:0,l=0;if(j<-Proj4js.common.HALF_PI&&j>-1.001*Proj4js.common.HALF_PI)j=-Proj4js.common.HALF_PI;else if(j>Proj4js.common.HALF_PI&&j<1.001*Proj4js.common.HALF_PI)j=Proj4js.common.HALF_PI;else if(j<-Proj4js.common.HALF_PI||j>Proj4js.common.HALF_PI)return Proj4js.reportError("geocent:lat out of range:"+j),null;return i>Proj4js.common.PI&&(i-=2*Proj4js.common.PI),f=Math.sin(j),h=Math.cos(j),g=f*f,e=this.a/Math.sqrt(1-this.es*g),b=(e+k)*h*Math.cos(i),c=(e+k)*h*Math.sin(i),d=(e*(1-this.es)+k)*f,a.x=b,a.y=c,a.z=d,l},geocentric_to_geodetic:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=1e-12,t=s*s,u=30,v=a.x,w=a.y,x=a.z?a.z:0;if(n=!1,b=Math.sqrt(v*v+w*w),c=Math.sqrt(v*v+w*w+x*x),b/this.a<s){if(n=!0,p=0,c/this.a<s)return q=Proj4js.common.HALF_PI,r=-this.b,void 0}else p=Math.atan2(w,v);d=x/c,e=b/c,f=1/Math.sqrt(1-this.es*(2-this.es)*e*e),i=e*(1-this.es)*f,j=d*f,o=0;do o++,h=this.a/Math.sqrt(1-this.es*j*j),r=b*i+x*j-h*(1-this.es*j*j),g=this.es*h/(h+r),f=1/Math.sqrt(1-g*(2-g)*e*e),k=e*(1-g)*f,l=d*f,m=l*i-k*j,i=k,j=l;while(m*m>t&&u>o);return q=Math.atan(l/Math.abs(k)),a.x=p,a.y=q,a.z=r,a},geocentric_to_geodetic_noniter:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=a.x,t=a.y,u=a.z?a.z:0;if(s=parseFloat(s),t=parseFloat(t),u=parseFloat(u),r=!1,0!=s)b=Math.atan2(t,s);else if(t>0)b=Proj4js.common.HALF_PI;else if(0>t)b=-Proj4js.common.HALF_PI;else if(r=!0,b=0,u>0)c=Proj4js.common.HALF_PI;else{if(!(0>u))return c=Proj4js.common.HALF_PI,d=-this.b,void 0;c=-Proj4js.common.HALF_PI}return f=s*s+t*t,e=Math.sqrt(f),g=u*Proj4js.common.AD_C,i=Math.sqrt(g*g+f),k=g/i,m=e/i,l=k*k*k,h=u+this.b*this.ep2*l,q=e-this.a*this.es*m*m*m,j=Math.sqrt(h*h+q*q),n=h/j,o=q/j,p=this.a/Math.sqrt(1-this.es*n*n),d=o>=Proj4js.common.COS_67P5?e/o-p:o<=-Proj4js.common.COS_67P5?e/-o-p:u/n+p*(this.es-1),0==r&&(c=Math.atan(n/o)),a.x=b,a.y=c,a.z=d,a},geocentric_to_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],e=this.datum_params[3],f=this.datum_params[4],g=this.datum_params[5],h=this.datum_params[6],i=h*(a.x-g*a.y+f*a.z)+b,j=h*(g*a.x+a.y-e*a.z)+c,k=h*(-f*a.x+e*a.y+a.z)+d;a.x=i,a.y=j,a.z=k}},geocentric_from_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],e=this.datum_params[3],f=this.datum_params[4],g=this.datum_params[5],h=this.datum_params[6],i=(a.x-b)/h,j=(a.y-c)/h,k=(a.z-d)/h;a.x=i+g*j-f*k,a.y=-g*i+j+e*k,a.z=f*i-e*j+k}}}),Proj4js.Point=Proj4js.Class({initialize:function(a,b,c){if("object"==typeof a)this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0]),this.y=parseFloat(d[1]),this.z=parseFloat(d[2])||0}else this.x=a,this.y=b,this.z=c||0},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}});var Proj4js={defaultDatum:"WGS84",transform:function(a,b,c){if(!a.readyToUse)return this.reportError("Proj4js initialization for:"+a.srsCode+" not yet complete"),c;if(!b.readyToUse)return this.reportError("Proj4js initialization for:"+b.srsCode+" not yet complete"),c;if(a.datum&&b.datum&&((a.datum.datum_type==Proj4js.common.PJD_3PARAM||a.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=b.datumCode||(b.datum.datum_type==Proj4js.common.PJD_3PARAM||b.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=a.datumCode)){var d=Proj4js.WGS84;this.transform(a,d,c),a=d}return"enu"!=a.axis&&this.adjust_axis(a,!1,c),"longlat"==a.projName?(c.x*=Proj4js.common.D2R,c.y*=Proj4js.common.D2R):(a.to_meter&&(c.x*=a.to_meter,c.y*=a.to_meter),a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=this.datum_transform(a.datum,b.datum,c),b.from_greenwich&&(c.x-=b.from_greenwich),"longlat"==b.projName?(c.x*=Proj4js.common.R2D,c.y*=Proj4js.common.R2D):(b.forward(c),b.to_meter&&(c.x/=b.to_meter,c.y/=b.to_meter)),"enu"!=b.axis&&this.adjust_axis(b,!0,c),c},datum_transform:function(a,b,c){if(a.compare_datums(b))return c;if(a.datum_type==Proj4js.common.PJD_NODATUM||b.datum_type==Proj4js.common.PJD_NODATUM)return c;var d=a.a,e=a.es,f=b.a,g=b.es,h=a.datum_type;if(h==Proj4js.common.PJD_GRIDSHIFT)if(0==this.apply_gridshift(a,0,c))a.a=Proj4js.common.SRS_WGS84_SEMIMAJOR,a.es=Proj4js.common.SRS_WGS84_ESQUARED;else{if(!a.datum_params)return a.a=d,a.es=a.es,c;for(var i=1,j=0,k=a.datum_params.length;k>j;j++)i*=a.datum_params[j];if(0==i)return a.a=d,a.es=a.es,c;h=a.datum_params.length>3?Proj4js.common.PJD_7PARAM:Proj4js.common.PJD_3PARAM}return b.datum_type==Proj4js.common.PJD_GRIDSHIFT&&(b.a=Proj4js.common.SRS_WGS84_SEMIMAJOR,b.es=Proj4js.common.SRS_WGS84_ESQUARED),(a.es!=b.es||a.a!=b.a||h==Proj4js.common.PJD_3PARAM||h==Proj4js.common.PJD_7PARAM||b.datum_type==Proj4js.common.PJD_3PARAM||b.datum_type==Proj4js.common.PJD_7PARAM)&&(a.geodetic_to_geocentric(c),(a.datum_type==Proj4js.common.PJD_3PARAM||a.datum_type==Proj4js.common.PJD_7PARAM)&&a.geocentric_to_wgs84(c),(b.datum_type==Proj4js.common.PJD_3PARAM||b.datum_type==Proj4js.common.PJD_7PARAM)&&b.geocentric_from_wgs84(c),b.geocentric_to_geodetic(c)),b.datum_type==Proj4js.common.PJD_GRIDSHIFT&&this.apply_gridshift(b,1,c),a.a=d,a.es=e,b.a=f,b.es=g,c},apply_gridshift:function(a,b,c){if(null==a.grids||0==a.grids.length)return-38;for(var d={x:c.x,y:c.y},e={x:Number.NaN,y:Number.NaN},f=!1,g=0,h=a.grids.length;h>g;g++){var i=a.grids[g];f=i.mandatory;var j=i.grid;if(null!=j){var k=(Math.abs(j.del[1])+Math.abs(j.del[0]))/1e4;if(!(j.ll[1]-k>d.y||j.ll[0]-k>d.x||j.ll[1]+(j.lim[1]-1)*j.del[1]+k<d.y||j.ll[0]+(j.lim[0]-1)*j.del[0]+k<d.x||("null"==i.name?(e.x=d.x,e.y=d.y):e=Proj4js.common.nad_cvt(d,b,j),isNaN(e.x))))break}else if(i.mandatory)return this.reportError("unable to find '"+i.name+"' grid."),-48}return isNaN(e.x)?f?-1:(this.reportError("failed to find a grid shift table for location '"+d.x*Proj4js.common.R2D+" "+d.y*Proj4js.common.R2D+" tried: '"+a.nadgrids+"'"),-48):(c.x=e.x,c.y=e.y,0)},adjust_axis:function(a,b,c){for(var d,e,f=c.x,g=c.y,h=c.z||0,i=0;3>i;i++)if(!b||2!=i||void 0!==c.z)switch(0==i?(d=f,e="x"):1==i?(d=g,e="y"):(d=h,e="z"),a.axis[i]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return alert("ERROR: unknow axis ("+a.axis[i]+") - check definition of "+a.projName),null}return c},reportError:function(){},extend:function(a,b){if(a=a||{},b)for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}return a},Class:function(){for(var a,b=function(){this.initialize.apply(this,arguments)},c={},d=0;d<arguments.length;++d)a="function"==typeof arguments[d]?arguments[d].prototype:arguments[d],Proj4js.extend(c,a);return b.prototype=c,b},bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}},scriptName:"proj4js.js",defsLookupService:"http://spatialreference.org/ref",libPath:null,getScriptLocation:function(){if(this.libPath)return this.libPath;for(var a=this.scriptName,b=a.length,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var e=c[d].getAttribute("src");if(e){var f=e.lastIndexOf(a);if(f>-1&&f+b==e.length){this.libPath=e.slice(0,-b);break}}}return this.libPath||""},loadScript:function(a,b,c,d){var e=document.createElement("script");e.defer=!1,e.type="text/javascript",e.id=a,e.onload=b,e.onerror=c,e.loadCheck=d,/MSIE/.test(navigator.userAgent)&&(e.onreadystatechange=this.checkReadyState),document.getElementsByTagName("head")[0].appendChild(e),e.src=a},checkReadyState:function(){"loaded"==this.readyState&&(this.loadCheck()?this.onload():this.onerror())}};Proj4js.Proj=Proj4js.Class({readyToUse:!1,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(a,b){if(this.srsCodeInput=a,this.queue=[],b&&this.queue.push(b),a.indexOf("GEOGCS")>=0||a.indexOf("GEOCCS")>=0||a.indexOf("PROJCS")>=0||a.indexOf("LOCAL_CS")>=0)return this.parseWKT(a),this.deriveConstants(),this.loadProjCode(this.projName),void 0;if(0==a.indexOf("urn:")){var c=a.split(":");"ogc"!=c[1]&&"x-ogc"!=c[1]||"def"!=c[2]||"crs"!=c[3]||(a=c[4]+":"+c[c.length-1])}else if(0==a.indexOf("http://")){var d=a.split("#");d[0].match(/epsg.org/)?a="EPSG:"+d[1]:d[0].match(/RIG.xml/)?a="IGNF:"+d[1]:-1!=d[0].indexOf("/def/crs/")&&(d=a.split("/"),a=d.pop(),d.pop(),a=d.pop()+":"+a)}this.srsCode=a.toUpperCase(),0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode),this.loadProjDefinition()},loadProjDefinition:function(){if(Proj4js.defs[this.srsCode])return this.defsLoaded(),void 0;var a=Proj4js.getScriptLocation()+"defs/"+this.srsAuth.toUpperCase()+this.srsProjNumber+".js";Proj4js.loadScript(a,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.loadFromService,this),Proj4js.bind(this.checkDefsLoaded,this))},loadFromService:function(){var a=Proj4js.defsLookupService+"/"+this.srsAuth+"/"+this.srsProjNumber+"/proj4js/";Proj4js.loadScript(a,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.defsFailed,this),Proj4js.bind(this.checkDefsLoaded,this))},defsLoaded:function(){this.parseDefs(),this.loadProjCode(this.projName)},checkDefsLoaded:function(){return Proj4js.defs[this.srsCode]?!0:!1},defsFailed:function(){Proj4js.reportError("failed to load projection definition for: "+this.srsCode),Proj4js.defs[this.srsCode]=Proj4js.defs.WGS84,this.defsLoaded()},loadProjCode:function(a){if(Proj4js.Proj[a])return this.initTransforms(),void 0;var b=Proj4js.getScriptLocation()+"projCode/"+a+".js";Proj4js.loadScript(b,Proj4js.bind(this.loadProjCodeSuccess,this,a),Proj4js.bind(this.loadProjCodeFailure,this,a),Proj4js.bind(this.checkCodeLoaded,this,a))},loadProjCodeSuccess:function(a){Proj4js.Proj[a].dependsOn?this.loadProjCode(Proj4js.Proj[a].dependsOn):this.initTransforms()},loadProjCodeFailure:function(a){Proj4js.reportError("failed to find projection file for: "+a)},checkCodeLoaded:function(a){return Proj4js.Proj[a]?!0:!1},initTransforms:function(){if(Proj4js.extend(this,Proj4js.Proj[this.projName]),this.init(),this.readyToUse=!0,this.queue)for(var a;a=this.queue.shift();)a.call(this,this)},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(a){var b=a.match(this.wktRE);if(b){var c,d=b[1],e=b[2],f=e.split(",");c="TOWGS84"==d.toUpperCase()?d:f.shift(),c=c.replace(/^\"/,""),c=c.replace(/\"$/,"");for(var g=new Array,h=0,i="",j=0;j<f.length;++j){for(var k=f[j],l=0;l<k.length;++l)"["==k.charAt(l)&&++h,"]"==k.charAt(l)&&--h;i+=k,0===h?(g.push(i),i=""):i+=","}switch(d){case"LOCAL_CS":this.projName="identity",this.localCS=!0,this.srsCode=c;break;case"GEOGCS":this.projName="longlat",this.geocsCode=c,this.srsCode||(this.srsCode=c);break;case"PROJCS":this.srsCode=c;break;case"GEOCCS":break;case"PROJECTION":this.projName=Proj4js.wktProjections[c];break;case"DATUM":this.datumName=c;break;case"LOCAL_DATUM":this.datumCode="none";break;case"SPHEROID":this.ellps=c,this.a=parseFloat(g.shift()),this.rf=parseFloat(g.shift());break;case"PRIMEM":this.from_greenwich=parseFloat(g.shift());break;case"UNIT":this.units=c,this.unitsPerMeter=parseFloat(g.shift());break;case"PARAMETER":var m=c.toLowerCase(),n=parseFloat(g.shift());switch(m){case"false_easting":this.x0=n;break;case"false_northing":this.y0=n;break;case"scale_factor":this.k0=n;break;case"central_meridian":this.long0=n*Proj4js.common.D2R;break;case"latitude_of_origin":this.lat0=n*Proj4js.common.D2R;break;case"more_here":}break;case"TOWGS84":this.datum_params=g;break;case"AXIS":var m=c.toLowerCase(),n=g.shift();switch(n){case"EAST":n="e";break;case"WEST":n="w";break;case"NORTH":n="n";break;case"SOUTH":n="s";break;case"UP":n="u";break;case"DOWN":n="d";break;case"OTHER":default:n=" "}switch(this.axis||(this.axis="enu"),m){case"x":this.axis=n+this.axis.substr(1,2);break;case"y":this.axis=this.axis.substr(0,1)+n+this.axis.substr(2,1);break;case"z":this.axis=this.axis.substr(0,2)+n}case"MORE_HERE":}for(var j=0;j<g.length;++j)this.parseWKT(g[j])}},parseDefs:function(){var a=new RegExp("(title|proj|units|datum|nadgrids|ellps|a|b|rf|lat_0|lat_1|lat_2|lat_ts|lon_0|lon_1|lon_2|alpha|lonc|x_0|y_0|k_0|k|r_a|zone|south|towgs84|to_meter|from_greenwich|pm|axis|czech|wktext|no_rot|no_off|no_defs)");
this.defData=Proj4js.defs[this.srsCode];var b,c;if(this.defData){for(var d=this.defData.split("+"),e=0;e<d.length;e++){var f=d[e].split("=");switch(b=f[0].toLowerCase(),c=f[1],b.replace(/\s/gi,"")){case"":break;case"title":for(this.title=c;!d[e+1].match(a);)this.title+="+"+d[++e];break;case"proj":this.projName=c.replace(/\s/gi,"");break;case"units":this.units=c.replace(/\s/gi,"");break;case"datum":this.datumCode=c.replace(/\s/gi,"");break;case"nadgrids":this.nadgrids=c.replace(/\s/gi,"");break;case"ellps":this.ellps=c.replace(/\s/gi,"");break;case"a":this.a=parseFloat(c);break;case"b":this.b=parseFloat(c);break;case"rf":this.rf=parseFloat(c);break;case"lat_0":this.lat0=c*Proj4js.common.D2R;break;case"lat_1":this.lat1=c*Proj4js.common.D2R;break;case"lat_2":this.lat2=c*Proj4js.common.D2R;break;case"lat_ts":this.lat_ts=c*Proj4js.common.D2R;break;case"lon_0":this.long0=c*Proj4js.common.D2R;break;case"lon_1":this.long1=c*Proj4js.common.D2R;break;case"lon_2":this.long2=c*Proj4js.common.D2R;break;case"no_rot":this.no_rot=!0;break;case"no_off":this.no_off=!0;break;case"alpha":this.alpha=parseFloat(c)*Proj4js.common.D2R;break;case"lonc":this.longc=c*Proj4js.common.D2R;break;case"x_0":this.x0=parseFloat(c);break;case"y_0":this.y0=parseFloat(c);break;case"k_0":this.k0=parseFloat(c);break;case"k":this.k0=parseFloat(c);break;case"r_a":this.R_A=!0;break;case"zone":this.zone=parseInt(c,10);break;case"south":this.utmSouth=!0;break;case"towgs84":this.datum_params=c.split(",");break;case"to_meter":this.to_meter=parseFloat(c);break;case"from_greenwich":this.from_greenwich=c*Proj4js.common.D2R;break;case"czech":this.czech=!0;break;case"pm":c=c.replace(/\s/gi,""),this.from_greenwich=Proj4js.PrimeMeridian[c]?Proj4js.PrimeMeridian[c]:parseFloat(c),this.from_greenwich*=Proj4js.common.D2R;break;case"axis":c=c.replace(/\s/gi,"");var g="ewnsud";3==c.length&&-1!=g.indexOf(c.substr(0,1))&&-1!=g.indexOf(c.substr(1,1))&&-1!=g.indexOf(c.substr(2,1))&&(this.axis=c);break;case"wktext":break;case"no_defs":}}this.deriveConstants()}},deriveConstants:function(){if(this.nadgrids&&0==this.nadgrids.length&&(this.nadgrids=null),this.nadgrids){this.grids=this.nadgrids.split(",");var a=null,b=this.grids.length;if(b>0)for(var c=0;b>c;c++){a=this.grids[c];var d=a.split("@");""!=d[d.length-1]?(this.grids[c]={mandatory:1==d.length,name:d[d.length-1],grid:Proj4js.grids[d[d.length-1]]},this.grids[c].mandatory&&!this.grids[c].grid&&Proj4js.reportError("Missing '"+this.grids[c].name+"'")):Proj4js.reportError("nadgrids syntax error '"+this.nadgrids+"' : empty grid found")}}if(this.datumCode&&"none"!=this.datumCode){var e=Proj4js.Datum[this.datumCode];e&&(this.datum_params=e.towgs84?e.towgs84.split(","):null,this.ellps=e.ellipse,this.datumName=e.datumName?e.datumName:this.datumCode)}if(!this.a){var f=Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84;Proj4js.extend(this,f)}this.rf&&!this.b&&(this.b=(1-1/this.rf)*this.a),(0===this.rf||Math.abs(this.a-this.b)<Proj4js.common.EPSLN)&&(this.sphere=!0,this.b=this.a),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=(this.a2-this.b2)/this.a2,this.e=Math.sqrt(this.es),this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0),this.ep2=(this.a2-this.b2)/this.b2,this.k0||(this.k0=1),this.axis||(this.axis="enu"),this.datum=new Proj4js.datum(this)}}),Proj4js.Proj.longlat={init:function(){},forward:function(a){return a},inverse:function(a){return a}},Proj4js.Proj.identity=Proj4js.Proj.longlat,Proj4js.defs={WGS84:"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3857":"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"},Proj4js.defs["EPSG:3785"]=Proj4js.defs["EPSG:3857"],Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3857"],Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3857"],Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3857"],Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:484813681109536e-20,EPSLN:1e-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SRS_WGS84_ESQUARED:.006694379990141316,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},tsfnz:function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(this.HALF_PI-b))/d},phi2z:function(a,b){for(var c,d,e=.5*a,f=this.HALF_PI-2*Math.atan(b),g=0;15>=g;g++)if(c=a*Math.sin(f),d=this.HALF_PI-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return alert("phi2z has NoConvergence"),-9999},qsfnz:function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},iqsfnz:function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return 0>b?-1*Proj4js.common.HALF_PI:Proj4js.common.HALF_PI;for(var d,e,f,g,h=Math.asin(.5*b),i=0;30>i;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return alert("IQSFN-CONV:Latitude failed to converge after 30 iterations"),0/0},asinz:function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},e0fn:function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},e1fn:function(a){return.375*a*(1+.25*a*(1+.46875*a))},e2fn:function(a){return.05859375*a*a*(1+.75*a)},e3fn:function(a){return a*a*a*(35/3072)},mlfn:function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},imlfn:function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return Proj4js.reportError("IMLFN-CONV:Latitude failed to converge after 15 iterations"),0/0},srat:function(a,b){return Math.pow((1-a)/(1+a),b)},sign:function(a){return 0>a?-1:1},adjust_lon:function(a){return a=Math.abs(a)<this.PI?a:a-this.sign(a)*this.TWO_PI},adjust_lat:function(a){return a=Math.abs(a)<this.HALF_PI?a:a-this.sign(a)*this.PI},latiso:function(a,b,c){if(Math.abs(b)>this.HALF_PI)return+Number.NaN;if(b==this.HALF_PI)return Number.POSITIVE_INFINITY;if(b==-1*this.HALF_PI)return-1*Number.POSITIVE_INFINITY;var d=a*c;return Math.log(Math.tan((this.HALF_PI+b)/2))+a*Math.log((1-d)/(1+d))/2},fL:function(a,b){return 2*Math.atan(a*Math.exp(b))-this.HALF_PI},invlatiso:function(a,b){var c=this.fL(1,b),d=0,e=0;do d=c,e=a*Math.sin(d),c=this.fL(Math.exp(a*Math.log((1+e)/(1-e))/2),b);while(Math.abs(c-d)>1e-12);return c},sinh:function(a){var b=Math.exp(a);return b=(b-1/b)/2},cosh:function(a){var b=Math.exp(a);return b=(b+1/b)/2},tanh:function(a){var b=Math.exp(a);return b=(b-1/b)/(b+1/b)},asinh:function(a){var b=a>=0?1:-1;return b*Math.log(Math.abs(a)+Math.sqrt(a*a+1))},acosh:function(a){return 2*Math.log(Math.sqrt((a+1)/2)+Math.sqrt((a-1)/2))},atanh:function(a){return Math.log((a-1)/(a+1))/2},gN:function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},pj_enfn:function(a){var b=new Array;b[0]=this.C00-a*(this.C02+a*(this.C04+a*(this.C06+a*this.C08))),b[1]=a*(this.C22-a*(this.C04+a*(this.C06+a*this.C08)));var c=a*a;return b[2]=c*(this.C44-a*(this.C46+a*this.C48)),c*=a,b[3]=c*(this.C66-a*this.C68),b[4]=c*a*this.C88,b},pj_mlfn:function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},pj_inv_mlfn:function(a,b,c){for(var d=1/(1-b),e=a,f=Proj4js.common.MAX_ITER;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(this.pj_mlfn(e,g,Math.cos(e),c)-a)*h*Math.sqrt(h)*d,e-=h,Math.abs(h)<Proj4js.common.EPSLN)return e}return Proj4js.reportError("cass:pj_inv_mlfn: Convergence error"),e},nad_intr:function(a,b){var c,d={x:(a.x-1e-7)/b.del[0],y:(a.y-1e-7)/b.del[1]},e={x:Math.floor(d.x),y:Math.floor(d.y)},f={x:d.x-1*e.x,y:d.y-1*e.y},g={x:Number.NaN,y:Number.NaN};if(e.x<0){if(!(-1==e.x&&f.x>.99999999999))return g;++e.x,f.x=0}else if(c=e.x+1,c>=b.lim[0]){if(!(c==b.lim[0]&&f.x<1e-11))return g;--e.x,f.x=1}if(e.y<0){if(!(-1==e.y&&f.y>.99999999999))return g;++e.y,f.y=0}else if(c=e.y+1,c>=b.lim[1]){if(!(c==b.lim[1]&&f.y<1e-11))return g;--e.y,f.y=1}c=e.y*b.lim[0]+e.x;var h={x:b.cvs[c][0],y:b.cvs[c][1]};c++;var i={x:b.cvs[c][0],y:b.cvs[c][1]};c+=b.lim[0];var j={x:b.cvs[c][0],y:b.cvs[c][1]};c--;var k={x:b.cvs[c][0],y:b.cvs[c][1]},l=f.x*f.y,m=f.x*(1-f.y),n=(1-f.x)*(1-f.y),o=(1-f.x)*f.y;return g.x=n*h.x+m*i.x+o*k.x+l*j.x,g.y=n*h.y+m*i.y+o*k.y+l*j.y,g},nad_cvt:function(a,b,c){var d={x:Number.NaN,y:Number.NaN};if(isNaN(a.x))return d;var e={x:a.x,y:a.y};e.x-=c.ll[0],e.y-=c.ll[1],e.x=Proj4js.common.adjust_lon(e.x-Proj4js.common.PI)+Proj4js.common.PI;var f=Proj4js.common.nad_intr(e,c);if(b){if(isNaN(f.x))return d;f.x=e.x+f.x,f.y=e.y-f.y;var g,h,i=9,j=1e-12;do{if(h=Proj4js.common.nad_intr(f,c),isNaN(h.x)){this.reportError("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:f.x-h.x-e.x,y:f.y+h.y-e.y},f.x-=g.x,f.y-=g.y}while(i--&&Math.abs(g.x)>j&&Math.abs(g.y)>j);if(0>i)return this.reportError("Inverse grid shift iterator failed to converge."),d;d.x=Proj4js.common.adjust_lon(f.x+c.ll[0]),d.y=f.y+c.ll[1]}else isNaN(f.x)||(d.x=a.x-f.x,d.y=a.y+f.y);return d},C00:1,C02:.25,C04:.046875,C06:.01953125,C08:.01068115234375,C22:.75,C44:.46875,C46:.013020833333333334,C48:.007120768229166667,C66:.3645833333333333,C68:.005696614583333333,C88:.3076171875},Proj4js.datum=Proj4js.Class({initialize:function(a){if(this.datum_type=Proj4js.common.PJD_WGS84,a){if(a.datumCode&&"none"==a.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM),a.datum_params){for(var b=0;b<a.datum_params.length;b++)a.datum_params[b]=parseFloat(a.datum_params[b]);(0!=a.datum_params[0]||0!=a.datum_params[1]||0!=a.datum_params[2])&&(this.datum_type=Proj4js.common.PJD_3PARAM),a.datum_params.length>3&&(0!=a.datum_params[3]||0!=a.datum_params[4]||0!=a.datum_params[5]||0!=a.datum_params[6])&&(this.datum_type=Proj4js.common.PJD_7PARAM,a.datum_params[3]*=Proj4js.common.SEC_TO_RAD,a.datum_params[4]*=Proj4js.common.SEC_TO_RAD,a.datum_params[5]*=Proj4js.common.SEC_TO_RAD,a.datum_params[6]=a.datum_params[6]/1e6+1)}this.datum_type=a.grids?Proj4js.common.PJD_GRIDSHIFT:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params,this.datum_type==Proj4js.common.PJD_GRIDSHIFT&&(this.grids=a.grids)}},compare_datums:function(a){return this.datum_type!=a.datum_type?!1:this.a!=a.a||Math.abs(this.es-a.es)>5e-11?!1:this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]&&this.datum_params[3]==a.datum_params[3]&&this.datum_params[4]==a.datum_params[4]&&this.datum_params[5]==a.datum_params[5]&&this.datum_params[6]==a.datum_params[6]:this.datum_type==Proj4js.common.PJD_GRIDSHIFT||a.datum_type==Proj4js.common.PJD_GRIDSHIFT?this.nadgrids==a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=a.z?a.z:0,l=0;if(j<-Proj4js.common.HALF_PI&&j>-1.001*Proj4js.common.HALF_PI)j=-Proj4js.common.HALF_PI;else if(j>Proj4js.common.HALF_PI&&j<1.001*Proj4js.common.HALF_PI)j=Proj4js.common.HALF_PI;else if(j<-Proj4js.common.HALF_PI||j>Proj4js.common.HALF_PI)return Proj4js.reportError("geocent:lat out of range:"+j),null;return i>Proj4js.common.PI&&(i-=2*Proj4js.common.PI),f=Math.sin(j),h=Math.cos(j),g=f*f,e=this.a/Math.sqrt(1-this.es*g),b=(e+k)*h*Math.cos(i),c=(e+k)*h*Math.sin(i),d=(e*(1-this.es)+k)*f,a.x=b,a.y=c,a.z=d,l},geocentric_to_geodetic:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=1e-12,t=s*s,u=30,v=a.x,w=a.y,x=a.z?a.z:0;if(n=!1,b=Math.sqrt(v*v+w*w),c=Math.sqrt(v*v+w*w+x*x),b/this.a<s){if(n=!0,p=0,c/this.a<s)return q=Proj4js.common.HALF_PI,r=-this.b,void 0}else p=Math.atan2(w,v);d=x/c,e=b/c,f=1/Math.sqrt(1-this.es*(2-this.es)*e*e),i=e*(1-this.es)*f,j=d*f,o=0;do o++,h=this.a/Math.sqrt(1-this.es*j*j),r=b*i+x*j-h*(1-this.es*j*j),g=this.es*h/(h+r),f=1/Math.sqrt(1-g*(2-g)*e*e),k=e*(1-g)*f,l=d*f,m=l*i-k*j,i=k,j=l;while(m*m>t&&u>o);return q=Math.atan(l/Math.abs(k)),a.x=p,a.y=q,a.z=r,a},geocentric_to_geodetic_noniter:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=a.x,t=a.y,u=a.z?a.z:0;if(s=parseFloat(s),t=parseFloat(t),u=parseFloat(u),r=!1,0!=s)b=Math.atan2(t,s);else if(t>0)b=Proj4js.common.HALF_PI;else if(0>t)b=-Proj4js.common.HALF_PI;else if(r=!0,b=0,u>0)c=Proj4js.common.HALF_PI;else{if(!(0>u))return c=Proj4js.common.HALF_PI,d=-this.b,void 0;c=-Proj4js.common.HALF_PI}return f=s*s+t*t,e=Math.sqrt(f),g=u*Proj4js.common.AD_C,i=Math.sqrt(g*g+f),k=g/i,m=e/i,l=k*k*k,h=u+this.b*this.ep2*l,q=e-this.a*this.es*m*m*m,j=Math.sqrt(h*h+q*q),n=h/j,o=q/j,p=this.a/Math.sqrt(1-this.es*n*n),d=o>=Proj4js.common.COS_67P5?e/o-p:o<=-Proj4js.common.COS_67P5?e/-o-p:u/n+p*(this.es-1),0==r&&(c=Math.atan(n/o)),a.x=b,a.y=c,a.z=d,a},geocentric_to_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],e=this.datum_params[3],f=this.datum_params[4],g=this.datum_params[5],h=this.datum_params[6],i=h*(a.x-g*a.y+f*a.z)+b,j=h*(g*a.x+a.y-e*a.z)+c,k=h*(-f*a.x+e*a.y+a.z)+d;a.x=i,a.y=j,a.z=k}},geocentric_from_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],e=this.datum_params[3],f=this.datum_params[4],g=this.datum_params[5],h=this.datum_params[6],i=(a.x-b)/h,j=(a.y-c)/h,k=(a.z-d)/h;a.x=i+g*j-f*k,a.y=-g*i+j+e*k,a.z=f*i-e*j+k}}}),Proj4js.Point=Proj4js.Class({initialize:function(a,b,c){if("object"==typeof a)this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0]),this.y=parseFloat(d[1]),this.z=parseFloat(d[2])||0}else this.x=a,this.y=b,this.z=c||0},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}}),Proj4js.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Proj4js.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},Proj4js.Datum={WGS84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},GGRS87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},NAD83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},NAD27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},OSGB36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}},Proj4js.WGS84=new Proj4js.Proj("WGS84"),Proj4js.Datum.OSB36=Proj4js.Datum.OSGB36,Proj4js.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Lambert_Conformal_Conic:"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Mercator_1SP:"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm"},Proj4js.grids={"null":{ll:[-3.14159265,-1.57079633],del:[3.14159265,1.57079633],lim:[3,3],count:9,cvs:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}},Proj4js.Proj.aea={init:function(){return Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN?(Proj4js.reportError("aeaInitEqualLatitudes"),void 0):(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0,void 0)},forward:function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Proj4js.common.qsfnz(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*Proj4js.common.adjust_lon(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a},inverse:function(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!=b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?g=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,g=this.phi1z(this.e3,c)),f=Proj4js.common.adjust_lon(e/this.ns0+this.long0),a.x=f,a.y=g,a},phi1z:function(a,b){var c,d,e,f,g,h=Proj4js.common.asinz(.5*b);if(a<Proj4js.common.EPSLN)return h;for(var i=a*a,j=1;25>=j;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return Proj4js.reportError("aea:phi1z:Convergence error"),null}},Proj4js.Proj.aeqd={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(a){var b=a.x,c=a.y,d=Math.sin(a.y),e=Math.cos(a.y),f=Proj4js.common.adjust_lon(b-this.long0);if(this.sphere){if(Math.abs(this.sin_p12-1)<=Proj4js.common.EPSLN)return a.x=this.x0+this.a*(Proj4js.common.HALF_PI-c)*Math.sin(f),a.y=this.y0-this.a*(Proj4js.common.HALF_PI-c)*Math.cos(f),a;if(Math.abs(this.sin_p12+1)<=Proj4js.common.EPSLN)return a.x=this.x0+this.a*(Proj4js.common.HALF_PI+c)*Math.sin(f),a.y=this.y0+this.a*(Proj4js.common.HALF_PI+c)*Math.cos(f),a;var g=this.sin_p12*d+this.cos_p12*e*Math.cos(f),h=Math.acos(g),i=h/Math.sin(h);return a.x=this.x0+this.a*i*e*Math.sin(f),a.y=this.y0+this.a*i*(this.cos_p12*d-this.sin_p12*e*Math.cos(f)),a}var j=Proj4js.common.e0fn(this.es),k=Proj4js.common.e1fn(this.es),l=Proj4js.common.e2fn(this.es),m=Proj4js.common.e3fn(this.es);if(Math.abs(this.sin_p12-1)<=Proj4js.common.EPSLN){var n=this.a*Proj4js.common.mlfn(j,k,l,m,Proj4js.common.HALF_PI),o=this.a*Proj4js.common.mlfn(j,k,l,m,c);return a.x=this.x0+(n-o)*Math.sin(f),a.y=this.y0-(n-o)*Math.cos(f),a}if(Math.abs(this.sin_p12+1)<=Proj4js.common.EPSLN){var n=this.a*Proj4js.common.mlfn(j,k,l,m,Proj4js.common.HALF_PI),o=this.a*Proj4js.common.mlfn(j,k,l,m,c);return a.x=this.x0+(n+o)*Math.sin(f),a.y=this.y0+(n+o)*Math.cos(f),a}var p,q=d/e,r=Proj4js.common.gN(this.a,this.e,this.sin_p12),s=Proj4js.common.gN(this.a,this.e,d),t=Math.atan((1-this.es)*q+this.es*r*this.sin_p12/(s*e)),u=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(t)-this.sin_p12*Math.cos(f));p=0==u?Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.abs(Math.abs(u)-Proj4js.common.PI)<=Proj4js.common.EPSLN?-Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.asin(Math.sin(f)*Math.cos(t)/Math.sin(u));var v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),x=w*w,h=r*p*(1-p*p*x*(1-x)/6+p*p*p/8*v*w*(1-2*x)+p*p*p*p/120*(x*(4-7*x)-3*v*v*(1-7*x))-p*p*p*p*p/48*v*w);return a.x=this.x0+h*Math.sin(u),a.y=this.y0+h*Math.cos(u),a},inverse:function(a){if(a.x-=this.x0,a.y-=this.y0,this.sphere){var b=Math.sqrt(a.x*a.x+a.y*a.y);if(b>2*Proj4js.common.HALF_PI*this.a)return Proj4js.reportError("aeqdInvDataError"),void 0;var c,d=b/this.a,e=Math.sin(d),f=Math.cos(d),g=this.long0;if(Math.abs(b)<=Proj4js.common.EPSLN)c=this.lat0;else{c=Proj4js.common.asinz(f*this.sin_p12+a.y*e*this.cos_p12/b);var h=Math.abs(this.lat0)-Proj4js.common.HALF_PI;g=Math.abs(h)<=Proj4js.common.EPSLN?this.lat0>=0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-a.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-a.x,a.y)):Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x*e,b*this.cos_p12*f-a.y*this.sin_p12*e))}return a.x=g,a.y=c,a}var i=Proj4js.common.e0fn(this.es),j=Proj4js.common.e1fn(this.es),k=Proj4js.common.e2fn(this.es),l=Proj4js.common.e3fn(this.es);if(Math.abs(this.sin_p12-1)<=Proj4js.common.EPSLN){var m=this.a*Proj4js.common.mlfn(i,j,k,l,Proj4js.common.HALF_PI),b=Math.sqrt(a.x*a.x+a.y*a.y),n=m-b,c=Proj4js.common.imlfn(n/this.a,i,j,k,l),g=Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-1*a.y));return a.x=g,a.y=c,a}if(Math.abs(this.sin_p12+1)<=Proj4js.common.EPSLN){var m=this.a*Proj4js.common.mlfn(i,j,k,l,Proj4js.common.HALF_PI),b=Math.sqrt(a.x*a.x+a.y*a.y),n=b-m,c=Proj4js.common.imlfn(n/this.a,i,j,k,l),g=Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,a.y));return a.x=g,a.y=c,a}var b=Math.sqrt(a.x*a.x+a.y*a.y),o=Math.atan2(a.x,a.y),p=Proj4js.common.gN(this.a,this.e,this.sin_p12),q=Math.cos(o),r=this.e*this.cos_p12*q,s=-r*r/(1-this.es),t=3*this.es*(1-s)*this.sin_p12*this.cos_p12*q/(1-this.es),u=b/p,v=u-s*(1+s)*Math.pow(u,3)/6-t*(1+3*s)*Math.pow(u,4)/24,w=1-s*v*v/2-u*v*v*v/6,x=Math.asin(this.sin_p12*Math.cos(v)+this.cos_p12*Math.sin(v)*q),g=Proj4js.common.adjust_lon(this.long0+Math.asin(Math.sin(o)*Math.sin(v)/Math.cos(x))),c=Math.atan((1-this.es*w*this.sin_p12/Math.sin(x))*Math.tan(x)/(1-this.es));return a.x=g,a.y=c,a}},Proj4js.Proj.cass={init:function(){this.sphere||(this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(a){var b,c,d=a.x,e=a.y;if(d=Proj4js.common.adjust_lon(d-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(e)*Math.sin(d)),c=this.a*(Math.atan2(Math.tan(e),Math.cos(d))-this.lat0);else{var f=Math.sin(e),g=Math.cos(e),h=Proj4js.common.gN(this.a,this.e,f),i=Math.tan(e)*Math.tan(e),j=d*Math.cos(e),k=j*j,l=this.es*g*g/(1-this.es),m=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,e);b=h*j*(1-k*i*(1/6-(8-i+8*l)*k/120)),c=m-this.ml0+h*f/g*k*(.5+(5-i+6*l)*k/24)}return a.x=b+this.x0,a.y=c+this.y0,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=Proj4js.common.imlfn(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)return a.x=this.long0,a.y=Proj4js.common.HALF_PI,0>e&&(a.y*=-1),a;var i=Proj4js.common.gN(this.a,this.e,Math.sin(h)),j=i*i*i/this.a/this.a*(1-this.es),k=Math.pow(Math.tan(h),2),l=d*this.a/i,m=l*l;b=h-i*Math.tan(h)/j*l*l*(.5-(1+3*k)*l*l/24),c=l*(1-m*(k/3+(1+3*k)*k*m/15))/Math.cos(h)}return a.x=Proj4js.common.adjust_lon(c+this.long0),a.y=Proj4js.common.adjust_lat(b),a}},Proj4js.Proj.cea={init:function(){this.sphere||(this.k0=Proj4js.common.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(a){var b,c,d=a.x,e=a.y,f=Proj4js.common.adjust_lon(d-this.long0);if(this.sphere)b=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var g=Proj4js.common.qsfnz(this.e,Math.sin(e));b=this.x0+this.a*this.k0*f,c=this.y0+.5*this.a*g/this.k0}return a.x=b,a.y=c,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=Proj4js.common.adjust_lon(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=Proj4js.common.iqsfnz(this.e,2*a.y*this.k0/this.a),b=Proj4js.common.adjust_lon(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a}},Proj4js.Proj.eqc={init:function(){this.x0||(this.x0=0),this.y0||(this.y0=0),this.lat0||(this.lat0=0),this.long0||(this.long0=0),this.lat_ts||(this.lat_ts=0),this.title||(this.title="Equidistant Cylindrical (Plate Carre)"),this.rc=Math.cos(this.lat_ts)},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=Proj4js.common.adjust_lat(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a},inverse:function(a){var b=a.x,c=a.y;return a.x=Proj4js.common.adjust_lon(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Proj4js.common.adjust_lat(this.lat0+(c-this.y0)/this.a),a}},Proj4js.Proj.eqdc={init:function(){return Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN?(Proj4js.common.reportError("eqdc:init: Equal Latitudes"),void 0):(null==this.lat2&&(this.lat2=this.lat1),this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml1=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Proj4js.common.EPSLN?(this.ns=this.sinphi,Proj4js.reportError("eqdc:Init:EqualLatitudes")):(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0),void 0)},forward:function(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*Proj4js.common.adjust_lon(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a},inverse:function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!=c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=Proj4js.common.adjust_lon(this.long0+f/this.ns),d=Proj4js.common.adjust_lat(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=Proj4js.common.imlfn(g,this.e0,this.e1,this.e2,this.e3),e=Proj4js.common.adjust_lon(this.long0+f/this.ns),a.x=e,a.y=d,a}},Proj4js.Proj.equi={init:function(){this.x0||(this.x0=0),this.y0||(this.y0=0),this.lat0||(this.lat0=0),this.long0||(this.long0=0)},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=this.x0+this.a*d*Math.cos(this.lat0),f=this.y0+this.a*c;return this.t1=e,this.t2=Math.cos(this.lat0),a.x=e,a.y=f,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b=a.y/this.a;Math.abs(b)>Proj4js.common.HALF_PI&&Proj4js.reportError("equi:Inv:DataError");var c=Proj4js.common.adjust_lon(this.long0+a.x/(this.a*Math.cos(this.lat0)));a.x=c,a.y=b}},Proj4js.Proj.gauss={init:function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Proj4js.common.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*a,this.ratexp))},forward:function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*Math.sin(c),this.ratexp))-Proj4js.common.HALF_PI,a.x=this.C*b,a},inverse:function(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Proj4js.common.FORTPI)/this.K,1/this.C),f=Proj4js.common.MAX_ITER;f>0&&(d=2*Math.atan(e*Proj4js.common.srat(this.e*Math.sin(a.y),-.5*this.e))-Proj4js.common.HALF_PI,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):(Proj4js.reportError("gauss:inverse:convergence failed"),null)}},Proj4js.Proj.gnom={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;
return d=Proj4js.common.adjust_lon(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Proj4js.common.EPSLN?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(Proj4js.reportError("orthoFwdPointError"),h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a},inverse:function(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=Proj4js.common.asinz(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=Proj4js.common.adjust_lon(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}},Proj4js.Proj.gstmerc={init:function(){var a=this.b/this.a;this.e=Math.sqrt(1-a*a),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var b=Math.sin(this.lat0),c=Math.asin(b/this.rs),d=Math.sin(c);this.cp=Proj4js.common.latiso(0,c,d)-this.rs*Proj4js.common.latiso(this.e,this.lat0,b),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*b*b),this.xs=this.x0,this.ys=this.y0-this.n2*c,this.title||(this.title="Gauss Schreiber transverse mercator")},forward:function(a){var b=a.x,c=a.y,d=this.rs*(b-this.lc),e=this.cp+this.rs*Proj4js.common.latiso(this.e,c,Math.sin(c)),f=Math.asin(Math.sin(d)/Proj4js.common.cosh(e)),g=Proj4js.common.latiso(0,f,Math.sin(f));return a.x=this.xs+this.n2*g,a.y=this.ys+this.n2*Math.atan(Proj4js.common.sinh(e)/Math.cos(d)),a},inverse:function(a){var b=a.x,c=a.y,d=Math.atan(Proj4js.common.sinh((b-this.xs)/this.n2)/Math.cos((c-this.ys)/this.n2)),e=Math.asin(Math.sin((c-this.ys)/this.n2)/Proj4js.common.cosh((b-this.xs)/this.n2)),f=Proj4js.common.latiso(0,e,Math.sin(e));return a.x=this.lc+d/this.rs,a.y=Proj4js.common.invlatiso(this.e,(f-this.cp)/this.rs),a}},Proj4js.Proj.krovak={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=Proj4js.common.adjust_lon(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech||(a.y*=-1,a.x*=-1),a},inverse:function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0==i&&15>k);return k>=15?(Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations"),null):a}},Proj4js.Proj.laea={S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var a=Math.abs(this.lat0);if(this.mode=Math.abs(a-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Proj4js.common.EPSLN?this.EQUIT:this.OBLIQ,this.es>0){var b;switch(this.qp=Proj4js.common.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Proj4js.common.qsfnz(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode==this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(a){var b,c,d=a.x,e=a.y;if(d=Proj4js.common.adjust_lon(d-this.long0),this.sphere){var f,g,h;switch(h=Math.sin(e),g=Math.cos(e),f=Math.cos(d),this.mode){case this.OBLIQ:case this.EQUIT:if(c=this.mode==this.EQUIT?1+g*f:1+this.sinph0*h+this.cosph0*g*f,c<=Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:y less than eps"),null;c=Math.sqrt(2/c),b=c*g*Math.sin(d),c*=this.mode==this.EQUIT?h:this.cosph0*h-this.sinph0*g*f;break;case this.N_POLE:f=-f;case this.S_POLE:if(Math.abs(e+this.phi0)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:phi < eps"),null;c=Proj4js.common.FORTPI-.5*e,c=2*(this.mode==this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(d),c*=f}}else{var f,i,h,j,k=0,l=0,m=0;switch(f=Math.cos(d),i=Math.sin(d),h=Math.sin(e),j=Proj4js.common.qsfnz(this.e,h),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(k=j/this.qp,l=Math.sqrt(1-k*k)),this.mode){case this.OBLIQ:m=1+this.sinb1*k+this.cosb1*l*f;break;case this.EQUIT:m=1+l*f;break;case this.N_POLE:m=Proj4js.common.HALF_PI+e,j=this.qp-j;break;case this.S_POLE:m=e-Proj4js.common.HALF_PI,j=this.qp+j}if(Math.abs(m)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:b < eps"),null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),c=this.mode==this.OBLIQ?this.ymf*m*(this.cosb1*k-this.sinb1*l*f):(m=Math.sqrt(2/(1+l*f)))*k*this.ymf,b=this.xmf*m*l*i;break;case this.N_POLE:case this.S_POLE:j>=0?(b=(m=Math.sqrt(j))*i,c=f*(this.mode==this.S_POLE?m:-m)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f,g=0,h=0;if(f=Math.sqrt(d*d+e*e),c=.5*f,c>1)return Proj4js.reportError("laea:Inv:DataError"),null;switch(c=2*Math.asin(c),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(h=Math.sin(c),g=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(f)<=Proj4js.common.EPSLN?0:Math.asin(e*h/f),d*=h,e=g*f;break;case this.OBLIQ:c=Math.abs(f)<=Proj4js.common.EPSLN?this.phi0:Math.asin(g*this.sinph0+e*h*this.cosph0/f),d*=h*this.cosph0,e=(g-Math.sin(c)*this.sinph0)*f;break;case this.N_POLE:e=-e,c=Proj4js.common.HALF_PI-c;break;case this.S_POLE:c-=Proj4js.common.HALF_PI}b=0!=e||this.mode!=this.EQUIT&&this.mode!=this.OBLIQ?Math.atan2(d,e):0}else{var i,j,k,l,m=0;switch(this.mode){case this.EQUIT:case this.OBLIQ:if(d/=this.dd,e*=this.dd,l=Math.sqrt(d*d+e*e),l<Proj4js.common.EPSLN)return a.x=0,a.y=this.phi0,a;j=2*Math.asin(.5*l/this.rq),i=Math.cos(j),d*=j=Math.sin(j),this.mode==this.OBLIQ?(m=i*this.sinb1+e*j*this.cosb1/l,k=this.qp*m,e=l*this.cosb1*i-e*this.sinb1*j):(m=e*j/l,k=this.qp*m,e=l*i);break;case this.N_POLE:e=-e;case this.S_POLE:if(k=d*d+e*e,!k)return a.x=0,a.y=this.phi0,a;m=1-k/this.qp,this.mode==this.S_POLE&&(m=-m)}b=Math.atan2(d,e),c=this.authlat(Math.asin(m),this.apa)}return a.x=Proj4js.common.adjust_lon(this.long0+b),a.y=c,a},P00:.3333333333333333,P01:.17222222222222222,P02:.10257936507936508,P10:.06388888888888888,P11:.0664021164021164,P20:.016415012942191543,authset:function(a){var b,c=new Array;return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},authlat:function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}},Proj4js.Proj.lcc={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN)return Proj4js.reportError("lcc:init: Equal Latitudes"),void 0;var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=Proj4js.common.msfnz(this.e,b,c),e=Proj4js.common.tsfnz(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=Proj4js.common.msfnz(this.e,f,g),i=Proj4js.common.tsfnz(this.e,this.lat2,f),j=Proj4js.common.tsfnz(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?Math.log(d/h)/Math.log(e/i):b,this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")},forward:function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Proj4js.common.PI)<=Proj4js.common.EPSLN&&(c=Proj4js.common.sign(c)*(Proj4js.common.HALF_PI-2*Proj4js.common.EPSLN));var d,e,f=Math.abs(Math.abs(c)-Proj4js.common.HALF_PI);if(f>Proj4js.common.EPSLN)d=Proj4js.common.tsfnz(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if(f=c*this.ns,0>=f)return Proj4js.reportError("lcc:forward: No Projection"),null;e=0}var g=this.ns*Proj4js.common.adjust_lon(b-this.long0);return a.x=this.k0*e*Math.sin(g)+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a},inverse:function(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!=b&&(i=Math.atan2(c*g,c*h)),0!=b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=Proj4js.common.phi2z(this.e,d),-9999==e)return null}else e=-Proj4js.common.HALF_PI;return f=Proj4js.common.adjust_lon(i/this.ns+this.long0),a.x=f,a.y=e,a}},Proj4js.Proj.merc={init:function(){var a=this.b/this.a;this.es=1-a*a,this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Proj4js.common.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(a){var b=a.x,c=a.y;if(c*Proj4js.common.R2D>90&&c*Proj4js.common.R2D<-90&&b*Proj4js.common.R2D>180&&b*Proj4js.common.R2D<-180)return Proj4js.reportError("merc:forward: llInputOutOfRange: "+b+" : "+c),null;var d,e;if(Math.abs(Math.abs(c)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)return Proj4js.reportError("merc:forward: ll2mAtPoles"),null;if(this.sphere)d=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Proj4js.common.FORTPI+.5*c));else{var f=Math.sin(c),g=Proj4js.common.tsfnz(this.e,c,f);d=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a},inverse:function(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Proj4js.common.HALF_PI-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var f=Math.exp(-e/(this.a*this.k0));if(c=Proj4js.common.phi2z(this.e,f),-9999==c)return Proj4js.reportError("merc:inverse: lat = -9999"),null}return b=Proj4js.common.adjust_lon(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}},Proj4js.Proj.mill={init:function(){},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=this.x0+this.a*d,f=this.y0+1.25*this.a*Math.log(Math.tan(Proj4js.common.PI/4+c/2.5));return a.x=e,a.y=f,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b=Proj4js.common.adjust_lon(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Proj4js.common.PI/4);return a.x=b,a.y=c,a}},Proj4js.Proj.moll={init:function(){},forward:function(a){for(var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=c,f=Proj4js.common.PI*Math.sin(c),g=0;!0;g++){var h=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=h,Math.abs(h)<Proj4js.common.EPSLN)break;g>=50&&Proj4js.reportError("moll:Fwd:IterationError")}e/=2,Proj4js.common.PI/2-Math.abs(c)<Proj4js.common.EPSLN&&(d=0);var i=.900316316158*this.a*d*Math.cos(e)+this.x0,j=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=i,a.y=j,a},inverse:function(a){var b,c;a.x-=this.x0,a.y-=this.y0;var c=a.y/(1.4142135623731*this.a);Math.abs(c)>.999999999999&&(c=.999999999999);var b=Math.asin(c),d=Proj4js.common.adjust_lon(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Proj4js.common.PI&&(d=-Proj4js.common.PI),d>Proj4js.common.PI&&(d=Proj4js.common.PI),c=(2*b+Math.sin(2*b))/Proj4js.common.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}},Proj4js.Proj.nzmg={iterations:1,init:function(){this.A=new Array,this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=new Array,this.B_im=new Array,this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=new Array,this.C_im=new Array,this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=new Array,this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(a){for(var b=a.x,c=a.y,d=c-this.lat0,e=b-this.long0,f=1e-5*(d/Proj4js.common.SEC_TO_RAD),g=e,h=1,i=0,j=1;10>=j;j++)h*=f,i+=this.A[j]*h;for(var k,l,m=i,n=g,o=1,p=0,q=0,r=0,j=1;6>=j;j++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[j]*o-this.B_im[j]*p,r=r+this.B_im[j]*o+this.B_re[j]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a},inverse:function(a){for(var b,c,d=a.x,e=a.y,f=d-this.x0,g=e-this.y0,h=g/this.a,i=f/this.a,j=1,k=0,l=0,m=0,n=1;6>=n;n++)b=j*h-k*i,c=k*h+j*i,j=b,k=c,l=l+this.C_re[n]*j-this.C_im[n]*k,m=m+this.C_im[n]*j+this.C_re[n]*k;for(var o=0;o<this.iterations;o++){for(var p,q,r=l,s=m,t=h,u=i,n=2;6>=n;n++)p=r*l-s*m,q=s*l+r*m,r=p,s=q,t+=(n-1)*(this.B_re[n]*r-this.B_im[n]*s),u+=(n-1)*(this.B_im[n]*r+this.B_re[n]*s);r=1,s=0;for(var v=this.B_re[1],w=this.B_im[1],n=2;6>=n;n++)p=r*l-s*m,q=s*l+r*m,r=p,s=q,v+=n*(this.B_re[n]*r-this.B_im[n]*s),w+=n*(this.B_im[n]*r+this.B_re[n]*s);var x=v*v+w*w;l=(t*v+u*w)/x,m=(u*v-t*w)/x}for(var y=l,z=m,A=1,B=0,n=1;9>=n;n++)A*=y,B+=this.D[n]*A;var C=this.lat0+1e5*B*Proj4js.common.SEC_TO_RAD,D=this.long0+z;return a.x=D,a.y=C,a}},Proj4js.Proj.omerc={init:function(){null==this.no_off&&(this.no_off=!1),null==this.no_rot&&(this.no_rot=!1),isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var d=Proj4js.common.tsfnz(this.e,this.lat0,a),e=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>e*e&&(e=1);var f,g;if(isNaN(this.longc)){var h=Proj4js.common.tsfnz(this.e,this.lat1,Math.sin(this.lat1)),i=Proj4js.common.tsfnz(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(e+Math.sqrt(e*e-1))*Math.pow(d,this.bl):(e-Math.sqrt(e*e-1))*Math.pow(d,this.bl);var j=Math.pow(h,this.bl),k=Math.pow(i,this.bl);f=this.el/j,g=.5*(f-1/f);var l=(this.el*this.el-k*j)/(this.el*this.el+k*j),m=(k-j)/(k+j),n=Proj4js.common.adjust_lon(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*n)/m)/this.bl,this.long0=Proj4js.common.adjust_lon(this.long0);var o=Proj4js.common.adjust_lon(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*o)/g),this.alpha=Math.asin(e*Math.sin(this.gamma0))}else f=this.lat0>=0?e+Math.sqrt(e*e-1):e-Math.sqrt(e*e-1),this.el=f*Math.pow(d,this.bl),g=.5*(f-1/f),this.gamma0=Math.asin(Math.sin(this.alpha)/e),this.long0=this.longc-Math.asin(g*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha))},forward:function(a){var b,c,d,e=a.x,f=a.y,g=Proj4js.common.adjust_lon(e-this.long0);if(Math.abs(Math.abs(f)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)d=f>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(Proj4js.common.FORTPI+.5*d*this.gamma0)),b=-1*d*Proj4js.common.HALF_PI*this.al/this.bl;else{var h=Proj4js.common.tsfnz(this.e,f,Math.sin(f)),i=this.el/Math.pow(h,this.bl),j=.5*(i-1/i),k=.5*(i+1/i),l=Math.sin(this.bl*g),m=(j*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/k;c=Math.abs(Math.abs(m)-1)<=Proj4js.common.EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,b=Math.abs(Math.cos(this.bl*g))<=Proj4js.common.EPSLN?this.al*this.bl*g:this.al*Math.atan2(j*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*g))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a},inverse:function(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),e=.5*(d-1/d),f=.5*(d+1/d),g=Math.sin(this.bl*b/this.al),h=(g*Math.cos(this.gamma0)+e*Math.sin(this.gamma0))/f,i=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<Proj4js.common.EPSLN?(a.x=this.long0,a.y=Proj4js.common.HALF_PI):Math.abs(h+1)<Proj4js.common.EPSLN?(a.x=this.long0,a.y=-1*Proj4js.common.HALF_PI):(a.y=Proj4js.common.phi2z(this.e,i),a.x=Proj4js.common.adjust_lon(this.long0-Math.atan2(e*Math.cos(this.gamma0)-g*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a}},Proj4js.Proj.ortho={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(a){var b,c,d,e,f,g,h=a.x,i=a.y;if(d=Proj4js.common.adjust_lon(h-this.long0),b=Math.sin(i),c=Math.cos(i),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Proj4js.common.EPSLN)var j=this.a*f*c*Math.sin(d),k=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e);else Proj4js.reportError("orthoFwdPointError");return a.x=j,a.y=k,a},inverse:function(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),b>this.a+1e-7&&Proj4js.reportError("orthoInvDataError"),c=Proj4js.common.asinz(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Proj4js.common.EPSLN?(h=this.lat0,a.x=g,a.y=h,a):(h=Proj4js.common.asinz(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Proj4js.common.HALF_PI,Math.abs(f)<=Proj4js.common.EPSLN?(g=this.lat0>=0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-a.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-a.x,a.y)),a.x=g,a.y=h,a):(g=Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x*d,b*this.cos_p14*e-a.y*this.sin_p14*d)),a.x=g,a.y=h,a))}},Proj4js.Proj.poly={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(a){var b,c,d,e=a.x,f=a.y,g=Proj4js.common.adjust_lon(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=Proj4js.common.EPSLN?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(Proj4js.common.adjust_lat(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=Proj4js.common.EPSLN)b=this.a*g,c=-1*this.ml0;else{var h=Proj4js.common.gN(this.a,this.e,Math.sin(f))/Math.tan(f);b=h*Math.sin(d),c=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+h*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a},inverse:function(a){var b,c,d,e,f,g,h,i;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=Proj4js.common.EPSLN)b=Proj4js.common.adjust_lon(d/this.a+this.long0),c=0;else{f=this.lat0+e/this.a,g=d*d/this.a/this.a+f*f,h=f;for(var j,k=Proj4js.common.MAX_ITER;k;--k)if(j=Math.tan(h),i=-1*(f*(h*j+1)-h-.5*(h*h+g)*j)/((h-f)/j-1),h+=i,Math.abs(i)<=Proj4js.common.EPSLN){c=h;break}b=Proj4js.common.adjust_lon(this.long0+Math.asin(d*Math.tan(h)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=Proj4js.common.EPSLN)c=0,b=Proj4js.common.adjust_lon(this.long0+d/this.a);else{f=(this.ml0+e)/this.a,g=d*d/this.a/this.a+f*f,h=f;for(var l,m,n,o,p,k=Proj4js.common.MAX_ITER;k;--k)if(p=this.e*Math.sin(h),l=Math.sqrt(1-p*p)*Math.tan(h),m=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,h),n=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),o=m/this.a,i=(f*(l*o+1)-o-.5*l*(o*o+g))/(this.es*Math.sin(2*h)*(o*o+g-2*f*o)/(4*l)+(f-o)*(l*n-2/Math.sin(2*h))-n),h-=i,Math.abs(i)<=Proj4js.common.EPSLN){c=h;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=Proj4js.common.adjust_lon(this.long0+Math.asin(d*l/this.a)/Math.sin(c))}return a.x=b,a.y=c,a}},Proj4js.Proj.sinu={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Proj4js.common.pj_enfn(this.es)},forward:function(a){var b,c,d=a.x,e=a.y;if(d=Proj4js.common.adjust_lon(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=Proj4js.common.MAX_ITER;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Proj4js.common.EPSLN)break}else e=1!=this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*Proj4js.common.pj_mlfn(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a},inverse:function(a){var b,c,d;if(a.x-=this.x0,a.y-=this.y0,b=a.y/this.a,this.sphere)a.y/=this.C_y,b=this.m?Math.asin((this.m*a.y+Math.sin(a.y))/this.n):1!=this.n?Math.asin(Math.sin(a.y)/this.n):a.y,d=a.x/(this.C_x*(this.m+Math.cos(a.y)));else{b=Proj4js.common.pj_inv_mlfn(a.y/this.a,this.es,this.en);var e=Math.abs(b);e<Proj4js.common.HALF_PI?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=Proj4js.common.adjust_lon(c)):e-Proj4js.common.EPSLN<Proj4js.common.HALF_PI&&(d=this.long0)}return a.x=d,a.y=b,a}},Proj4js.Proj.somerc={init:function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha),this.K=Math.log(Math.tan(Math.PI/4+this.b0/2))-this.alpha*Math.log(Math.tan(Math.PI/4+a/2))+this.alpha*g/2*Math.log((1+g*b)/(1-g*b))},forward:function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},inverse:function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return Proj4js.reportError("omercFwdInfinity"),void 0;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}},Proj4js.Proj.stere={ssfn_:function(a,b,c){return b*=c,Math.tan(.5*(Proj4js.common.HALF_PI+a))*Math.pow((1-b)/(1+b),.5*c)},init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1==this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Proj4js.common.EPSLN&&(this.k0=.5*(1+Proj4js.common.sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Proj4js.common.EPSLN&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1==this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Proj4js.common.EPSLN&&(this.k0=.5*this.cons*Proj4js.common.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Proj4js.common.tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Proj4js.common.msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Proj4js.common.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(a){var b,c,d,e,f=a.x,g=a.y,h=Math.sin(g),i=Math.cos(g),j=Proj4js.common.adjust_lon(f-this.long0);if(Math.abs(Math.abs(f-this.long0)-Proj4js.common.PI)<=Proj4js.common.EPSLN&&Math.abs(g+this.lat0)<=Proj4js.common.EPSLN)return a.x=0/0,a.y=0/0,a;if(this.sphere)return b=2*this.k0/(1+this.sinlat0*h+this.coslat0*i*Math.cos(j)),a.x=this.a*b*i*Math.sin(j)+this.x0,a.y=this.a*b*(this.coslat0*h-this.sinlat0*i*Math.cos(j))+this.y0,a;if(c=2*Math.atan(this.ssfn_(g,h,this.e))-Proj4js.common.HALF_PI,e=Math.cos(c),d=Math.sin(c),Math.abs(this.coslat0)<=Proj4js.common.EPSLN){var k=Proj4js.common.tsfnz(this.e,g*this.con,this.con*h),l=2*this.a*this.k0*k/this.cons;return a.x=this.x0+l*Math.sin(f-this.long0),a.y=this.y0-this.con*l*Math.cos(f-this.long0),a}return Math.abs(this.sinlat0)<Proj4js.common.EPSLN?(b=2*this.a*this.k0/(1+e*Math.cos(j)),a.y=b*d):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*e*Math.cos(j))),a.y=b*(this.cosX0*d-this.sinX0*e*Math.cos(j))+this.y0),a.x=b*e*Math.sin(j)+this.x0,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var e=2*Math.atan(d/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,d<=Proj4js.common.EPSLN?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(e)*this.sinlat0+a.y*Math.sin(e)*this.coslat0/d),b=Math.abs(this.coslat0)<Proj4js.common.EPSLN?this.lat0>0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-1*a.y)):Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,a.y)):Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x*Math.sin(e),d*this.coslat0*Math.cos(e)-a.y*this.sinlat0*Math.sin(e))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=Proj4js.common.EPSLN){if(d<=Proj4js.common.EPSLN)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con;var f=d*this.cons/(2*this.a*this.k0);c=this.con*Proj4js.common.phi2z(this.e,f),b=this.con*Proj4js.common.adjust_lon(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else{var g=2*Math.atan(d*this.cosX0/(2*this.a*this.k0*this.ms1));b=this.long0;var h;d<=Proj4js.common.EPSLN?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/d),b=Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x*Math.sin(g),d*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*Proj4js.common.phi2z(this.e,Math.tan(.5*(Proj4js.common.HALF_PI+h)))}return a.x=b,a.y=c,a}},Proj4js.Proj.sterea={dependsOn:"gauss",init:function(){return Proj4js.Proj.gauss.init.apply(this),this.rc?(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"),void 0):(Proj4js.reportError("sterea:init:E_ERROR_0"),void 0)},forward:function(a){var b,c,d,e;return a.x=Proj4js.common.adjust_lon(a.x-this.long0),Proj4js.Proj.gauss.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},inverse:function(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,Proj4js.Proj.gauss.inverse.apply(this,[a]),a.x=Proj4js.common.adjust_lon(a.x+this.long0),a}},Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(a){var b,c,d,e=a.x,f=a.y,g=Proj4js.common.adjust_lon(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.sphere){var j=i*Math.sin(g);if(Math.abs(Math.abs(j)-1)<1e-10)return Proj4js.reportError("tmerc:forward: Point projects into infinity"),93;c=.5*this.a*this.k0*Math.log((1+j)/(1-j)),b=Math.acos(i*Math.cos(g)/Math.sqrt(1-j*j)),0>f&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var k=i*g,l=Math.pow(k,2),m=this.ep2*Math.pow(i,2),n=Math.tan(f),o=Math.pow(n,2);b=1-this.es*Math.pow(h,2);var p=this.a/Math.sqrt(b),q=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*p*k*(1+l/6*(1-o+m+l/20*(5-18*o+Math.pow(o,2)+72*m-58*this.ep2)))+this.x0,d=this.k0*(q-this.ml0+p*n*l*(.5+l/24*(5-o+9*m+4*Math.pow(m,2)+l/30*(61-58*o+Math.pow(o,2)+600*m-330*this.ep2))))+this.y0}return a.x=c,a.y=d,a},inverse:function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var i=Math.exp(a.x/(this.a*this.k0)),j=.5*(i-1/i),k=this.lat0+a.y/(this.a*this.k0),l=Math.cos(k);b=Math.sqrt((1-l*l)/(1+j*j)),f=Proj4js.common.asinz(b),0>k&&(f=-f),g=0==j&&0==l?this.long0:Proj4js.common.adjust_lon(Math.atan2(j,l)+this.long0)}else{var m=a.x-this.x0,n=a.y-this.y0;for(b=(this.ml0+n/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=Proj4js.common.EPSLN));e++)if(e>=h)return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95;if(Math.abs(c)<Proj4js.common.HALF_PI){var o=Math.sin(c),p=Math.cos(c),q=Math.tan(c),r=this.ep2*Math.pow(p,2),s=Math.pow(r,2),t=Math.pow(q,2),u=Math.pow(t,2);b=1-this.es*Math.pow(o,2);var v=this.a/Math.sqrt(b),w=v*(1-this.es)/b,x=m/(v*this.k0),y=Math.pow(x,2);f=c-v*q*y/w*(.5-y/24*(5+3*t+10*r-4*s-9*this.ep2-y/30*(61+90*t+298*r+45*u-252*this.ep2-3*s))),g=Proj4js.common.adjust_lon(this.long0+x*(1-y/6*(1+2*t+r-y/20*(5-2*r+28*t-3*s+8*this.ep2+24*u)))/p)}else f=Proj4js.common.HALF_PI*Proj4js.common.sign(n),g=this.long0}return a.x=g,a.y=f,a}},Proj4js.Proj.utm={dependsOn:"tmerc",init:function(){return this.zone?(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*Proj4js.common.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Proj4js.Proj.tmerc.init.apply(this),this.forward=Proj4js.Proj.tmerc.forward,this.inverse=Proj4js.Proj.tmerc.inverse,void 0):(Proj4js.reportError("utm:init: zone must be specified for UTM"),void 0)}},Proj4js.Proj.vandg={init:function(){this.R=this.a},forward:function(a){var b,c,d=a.x,e=a.y,f=Proj4js.common.adjust_lon(d-this.long0);Math.abs(e)<=Proj4js.common.EPSLN&&(b=this.x0+this.R*f,c=this.y0);var g=Proj4js.common.asinz(2*Math.abs(e/Proj4js.common.PI));(Math.abs(f)<=Proj4js.common.EPSLN||Math.abs(Math.abs(e)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)&&(b=this.x0,c=e>=0?this.y0+Proj4js.common.PI*this.R*Math.tan(.5*g):this.y0+Proj4js.common.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Proj4js.common.PI/f-f/Proj4js.common.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Proj4js.common.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);0>f&&(p=-p),b=this.x0+p;
var q=i+l;return p=Proj4js.common.PI*this.R*(n*q-h*Math.sqrt((o+i)*(i+1)-q*q))/(o+i),c=e>=0?this.y0+p:this.y0-p,a.x=b,a.y=c,a},inverse:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Proj4js.common.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Proj4js.common.PI/3)-h/3/i)*Proj4js.common.PI:-(-k*Math.cos(m+Proj4js.common.PI/3)-h/3/i)*Proj4js.common.PI,b=Math.abs(d)<Proj4js.common.EPSLN?this.long0:Proj4js.common.adjust_lon(this.long0+Proj4js.common.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}};